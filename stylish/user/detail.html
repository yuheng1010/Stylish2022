<!DOCTYPE html>
<html>

<head>
    <title>stylish.index</title>
    <link rel="stylesheet" href="./detail.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.1.3/dist/css/bootstrap.min.css"
        integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-OERcA2EqjJCMA+/3y+gxIOqMEjwtxJY7qPCqsdltbNJuaOe923+mo//f6V8Qbsw3"
        crossorigin="anonymous"></script>
    <meta charset="utf-8">
</head>

<body>
    <header>

        <div class="ban1" width="100%">
            <img src="./icon/logo.png" id="logo" width='258px' ;height='48px' onclick="showAll(event)">
            <div class="category">
                <a id="women" name="women" href="http://localhost:8000/index.html?cate=women"
                    onclick="cate('women')">女&emsp;裝</a>
                <font>|</font>
                <a id="men" name="men" href="http://localhost:8000/index.html?cate=men"
                    onclick="cate('men')">男&emsp;裝</a>
                <font>|</font>
                <a id="other" name="accessories" href="http://localhost:8000/index.html?cate=accessories"
                    onclick="cate('accessories')">配&emsp;件</a>
            </div>

            <div class="search" width="100%">
                <input type="text" id="search_bar" style="border-radius: 40px">
                <input type="image" id="search_btn" onclick='display()' src="./icon/search.png"
                    style="height: 44px;width:44px">
            </div>
            <input type="image" src="./icon/cart.png" id="cart" width='44px' ;height='44px'>
            <input type="image" src="./icon/member.png" id="profile" width='48px' ;height='44px'>
        </div>
        <div class="scroll">
            <div class="smallCate">
                <a id="womenS" href="http://localhost:8000/index.html?cate=women" onclick="cate('women')"
                    value="women">女&emsp;裝</a>
                <font>|</font>
                <a id="menS" href="http://localhost:8000/index.html?cate=men" onclick="cate('men')"
                    value="men">男&emsp;裝</a>
                <font>|</font>
                <a id="otherS" href="http://localhost:8000/index.html?cate=accessories" onclick="cate('accessories')"
                    value="accessories">配&emsp;件</a>
            </div>
        </div>
    </header>


    <div id="sea" width="100%" height="140px">
        <div id="carouselExampleDark" class="carousel carousel-dark slide" data-bs-ride="carousel">
            <div class="carousel-indicators">
                <button type="button" data-bs-target="#carouselExampleDark" data-bs-slide-to="0" class="active"
                    aria-current="true" aria-label="Slide 1"></button>
                <button type="button" data-bs-target="#carouselExampleDark" data-bs-slide-to="1"
                    aria-label="Slide 2"></button>
                <button type="button" data-bs-target="#carouselExampleDark" data-bs-slide-to="2"
                    aria-label="Slide 3"></button>
            </div>
            <div class="carousel-inner">
                <div class="carousel-item active" data-bs-interval="3000">
                    <img src="./icon/green.jpg" class="d-block w-100" alt="...">
                    <div class="carousel-caption d-none d-md-block ">

                    </div>
                </div>
                <div class="carousel-item" data-bs-interval="3000">
                    <img src="./icon/scroll_mt2.jpg" class="d-block w-100" alt="...">
                    <div class="carousel-caption d-none d-md-block">

                    </div>
                </div>
                <div class="carousel-item" data-bs-interval="3000">
                    <img src="./icon/scroll_mt3.jpg" class="d-block w-100" alt="...">
                    <div class="carousel-caption d-none d-md-block">

                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="container justify-content-center">
        <div class="detailsAll">
        </div>
    </div>

    <div class="container">
        <div class="row justify-content-start"></div>
    </div>

    <footer>
        <nav class="nav">
            <div class="info">
                <a class="nav-link" href="#">關於STYLiSH</a>
                <font>|</font>
                <a class="nav-link" href="#">服務條款</a>
                <font>|</font>
                <a class="nav-link" href="#">隱私政策</a>
                <font>|</font>
                <a class="nav-link" href="#">聯絡我們</a>
                <font>|</font>
                <a class="nav-link" href="#">FAQ</a>
            </div>
            <div class="info2">
                <div class="rI1"><a class="nav-link" href="#">關於STYLiSH</a><a class="nav-link" href="#">服務條款</a><a
                        class="nav-link" href="#">隱私政策</a></div>
                <div class="rI1"> <a class="nav-link" href="#">聯絡我們</a><a class="nav-link" href="#">FAQ</a></div>
                <input type="image" id="line" src="./icon/line.png" style="height: 20px;width:20px">
                <input type="image" id="fb" src="./icon/facebook.png" style="height: 20px;width:20px">
                <input type="image" id="twitter" src="./icon/twitter.png" style="height: 20px;width:20px">
            </div>
            <div class="navicon">
                <input type="image" id="line" src="./icon/line.png" style="height: 44px;width:44px">
                <input type="image" id="fb" src="./icon/facebook.png" style="height: 44px;width:44px">
                <input type="image" id="twitter" src="./icon/twitter.png" style="height: 44px;width:44px">
            </div>
            <small style="color: darkgray;size: 5px;">&copy;2018. All rights reserved.</small>
        </nav>
        <div class="menu">
            <div class="m1">
                <img src="./icon/cart-mobile.png" height="44px" width="44px">
                <a id="cartB" href="">購物車</a>
            </div>
            <font size="6">|</font>
            <div class="m1">
                <img src="./icon/member-mobile.png" height="44px" width="44px">
                <a id="member" href="">會員</a>
            </div>

        </div>
    </footer>
</body>
<script>


    function display() {
        var btn = document.getElementById('search_bar');
        btn.style.display = 'block';
        btn.style.width = '100%';
    }

    var input = document.querySelector("#search_bar");
    input.addEventListener('keydown', showKey);
    function showKey(e) {
        switch (e.keyCode) {
            case 13:
                console.log('Enter');
                console.log(input.value);
                document.querySelector(".row").innerHTML = '';

                fetch('http://localhost:8000/api/v1/products/search?paging=0&keyword=' + input.value, { method: "GET", headers: { 'Content-Type': 'application/json; charset=UTF-8' } })
                    .then(res => {
                        return res.json();
                    }).then(result => {
                        var r = JSON.parse(result.list);
                        console.log(result);
                        console.log(r)
                        inhtml(r)
                    })

        }
    }
    var num_jia = document.getElementById("num-jia");
    var num_jian = document.getElementById("num-jian");
    var input_num = document.getElementById("input-num");
    function jia() {
            var input_num = document.getElementById("input-num");
            input_num.value = parseInt(input_num.value) + 1;
        }

        function jian() {
            var input_num = document.getElementById("input-num");
            if (input_num.value <= 0) {
                input_num.value = 0;
            } else {
                input_num.value = parseInt(input_num.value) - 1;
            }
        }
    function addCart() {
        var color =document.querySelector('.color').value
        var color =document.querySelector('.size').value
      

    }

    window.onload = function run() {
        const params = new URLSearchParams(document.location.search);
        const id = params.get("id");
        console.log(id)
        fetch('http://localhost:8000/api/v1/products/details/' + id)
            .then(res => {
                return res.json();
            }).then(data => {
                var re = JSON.parse(data.list)
                console.log(re)
                document.querySelector(".detailsAll").innerHTML = `<div class="row">\
                                                        <div class="col-12 col-xl-7 ">\
                                                            <img src="${re[0].img}" class="img-fluid">\
                                                        </div>\
                                                        <div class="col-12 col-xl-5">\
                                                            <p>${re[0].pname}</p>\
                                                            <p style="color: gray">${re[0].id}</p>\
                                                            <p>TWD.${re[0].pprice}</p>\
                                                            <hr style="width: 400px;">\
                                                            <div class="colore" >\
                                                                <font>顏色&emsp;|&emsp;</font><button\
                                                                    style="background-color: #2d775b;width:30px;height: 30px;" value="#2d775b"></button>\
                                                                <button style="background-color: #0d441e;width:30px;height: 30px;" value="#0d441e"></button>\
                                                                <button style="background-color: #4db1eb;width:30px;height: 30px;" value="#4db1eb"></button>\
                                                            </div>\
                                                            <div class="size">\
                                                                <font>尺寸&emsp;|&emsp;</font><button\
                                                                    style="background-color: #D3D3D3;width:30px;height: 30px;border-radius: 50%;">S</button>\
                                                                <button style="background-color:#D3D3D3;width:30px;height: 30px;border-radius: 50%;">M</button>\
                                                                <button style="background-color:#D3D3D3;width:30px;height: 30px;border-radius: 50%;">L</button>\
                                                            </div>\
                                                            <div class="btn-numbox">\
                                                                <font>數量&emsp;|&emsp;</font>\
                                                                <li>\
                                                                    <ul class="count">\
                                                                        <li><span id="num-jian" class="num-jian" onclick="jian()">-</span></li>\
                                                                        <li><input type="text" class="input-num" id="input-num" value="0" /></li>\
                                                                        <li><span id="num-jia" class="num-jia" onclick="jia()">+</span></li>\
                                                                    </ul>\
                                                                </li>\
                                                            </div>\
                                                            <br><br>\
                                                            <div>\
                                                                <button\
                                                                    style="background-color: rgb(12, 46, 21);width:220px;height: 40px;color:white ;"onclick="addCart()">請選擇尺寸</button>\
                                                            </div>\
                                                            <p>${re[0].des_1}</p>
                                                        </div>\
                                                    </div> <br>\
                                                    <div class="col-12" id="pics">\
                                                        <p>細部說明</p>\
                                                        <p>${re[0].des_2}</p>\
                                                        <img id="ps1" src=${JSON.parse(re[0].imgs)[0]}>\
                                                        <img id="ps1" src=${JSON.parse(re[0].imgs)[1]}>\
                                                        <img id="ps1" src=${JSON.parse(re[0].imgs)[0]}>\
                                                        <img id="ps1" src=${JSON.parse(re[0].imgs)[1]}>\
                                                    </div>`


            })

    }

    // var myCarousel = document.querySelector('#carouselExampleDark')
    // var carousel = new bootstrap.Carousel(myCarousel)

</script>

</html>